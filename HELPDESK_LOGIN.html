<!DOCTYPE html> <!-- Declares the document as HTML5 -->
<html lang="en"> <!-- Root element with English language -->
<head> <!-- Metadata section -->
    <meta charset="UTF-8"> <!-- UTF-8 character encoding -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive viewport -->
    <title>Login/Signup Page</title> <!-- Page title -->
    <style> <!-- Internal CSS -->
        * { /* Universal selector */
            margin: 0; /* Reset margins */
            padding: 0; /* Reset padding */
            box-sizing: border-box; /* Include padding/border in size */
        }

        body { /* Body styling */
            font-family: 'Arial', sans-serif; /* Font family */
            background: linear-gradient(135deg, #6a11cb, #2575fc); /* Gradient background */
            display: flex; /* Flexbox layout */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            min-height: 100vh; /* Full viewport height */
            color: #333; /* Default text color */
            transition: background 0.5s ease; /* Smooth background transition */
        }

        body.dark-mode { /* Dark mode body */
            background: linear-gradient(135deg, #1e1e2f, #2c2c54); /* Dark gradient */
            color: #fff; /* White text */
        }

        .container { /* Main container */
            background: white; /* White background */
            border-radius: 10px; /* Rounded corners */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* Shadow */
            width: 90%; /* Responsive width */
            max-width: 400px; /* Max width */
            padding: 2rem; /* Padding */
            text-align: center; /* Center text */
            transition: all 0.5s ease; /* Smooth transitions */
            animation: fadeIn 0.5s ease-in; /* Fade-in animation */
        }

        @keyframes fadeIn { /* Fade-in animation keyframes */
            from { opacity: 0; } /* Start transparent */
            to { opacity: 1; } /* End fully opaque */
        }

        body.dark-mode .container { /* Dark mode container */
            background: #2c2c54; /* Dark purple background */
            color: #fff; /* White text */
        }

        .form-toggle { /* Toggle button container */
            display: flex; /* Flexbox layout */
            justify-content: space-between; /* Space buttons */
            margin-bottom: 1.5rem; /* Bottom margin */
        }

        .toggle-button { /* Toggle buttons */
            background: none; /* No background */
            border: none; /* No border */
            font-size: 1.2rem; /* Font size */
            color: #666; /* Gray text */
            cursor: pointer; /* Pointer cursor */
            padding: 0.5rem 1rem; /* Padding */
            transition: all 0.3s ease; /* Smooth transition */
        }

        body.dark-mode .toggle-button { /* Dark mode toggle buttons */
            color: #ccc; /* Light gray text */
        }

        .toggle-button.active { /* Active toggle button */
            color: #2575fc; /* Blue text */
            border-bottom: 2px solid #2575fc; /* Blue underline */
        }

        body.dark-mode .toggle-button.active { /* Dark mode active button */
            color: #6a11cb; /* Purple text */
            border-bottom: 2px solid #6a11cb; /* Purple underline */
        }

        .form { /* Form styling */
            display: none; /* Hidden by default */
        }

        .form.active { /* Active form */
            display: block; /* Visible */
        }

        .input-group { /* Input container */
            position: relative; /* For absolute positioning */
            margin-bottom: 1.5rem; /* Bottom margin */
        }

        .input-group input { /* Input fields */
            width: 100%; /* Full width */
            padding: 10px 10px 10px 5px; /* Padding */
            border: none; /* No border */
            border-bottom: 2px solid #ccc; /* Gray underline */
            font-size: 1rem; /* Font size */
            outline: none; /* No outline */
            background: transparent; /* Transparent background */
            transition: border-color 0.3s ease; /* Smooth border transition */
        }

        body.dark-mode .input-group input { /* Dark mode inputs */
            color: #fff; /* White text */
            border-bottom-color: #666; /* Darker underline */
        }

        .input-group input:focus { /* Focused inputs */
            border-bottom-color: #2575fc; /* Blue underline */
        }

        body.dark-mode .input-group input:focus { /* Dark mode focused inputs */
            border-bottom-color: #6a11cb; /* Purple underline */
        }

        .input-group label { /* Input labels */
            position: absolute; /* Absolute positioning */
            top: 10px; /* Initial top position */
            left: 5px; /* Left position */
            color: #999; /* Gray text */
            font-size: 1rem; /* Font size */
            pointer-events: none; /* No click interference */
            transition: all 0.3s ease; /* Smooth transition */
        }

        body.dark-mode .input-group label { /* Dark mode labels */
            color: #ccc; /* Light gray text */
        }

        .input-group input:focus ~ label, /* Label when input focused */
        .input-group input:not(:placeholder-shown) ~ label { /* Label when input filled */
            top: -15px; /* Move up */
            font-size: 0.8rem; /* Smaller font */
            color: #2575fc; /* Blue text */
        }

        body.dark-mode .input-group input:focus ~ label, /* Dark mode focused label */
        body.dark-mode .input-group input:not(:placeholder-shown) ~ label { /* Dark mode filled label */
            color: #6a11cb; /* Purple text */
        }

        .password-toggle { /* Password visibility toggle */
            position: absolute; /* Absolute positioning */
            right: 5px; /* Right position */
            top: 50%; /* Vertical center */
            transform: translateY(-50%); /* Adjust centering */
            cursor: pointer; /* Pointer cursor */
            color: #999; /* Gray text */
        }

        body.dark-mode .password-toggle { /* Dark mode toggle */
            color: #ccc; /* Light gray text */
        }

        .password-toggle:hover { /* Toggle on hover */
            color: #2575fc; /* Blue text */
        }

        .social-login { /* Social login section */
            margin: 1.5rem 0; /* Vertical margin */
        }

        .social-login button { /* Social login buttons */
            width: 100%; /* Full width */
            padding: 10px; /* Padding */
            margin: 5px 0; /* Vertical margin */
            border: none; /* No border */
            border-radius: 5px; /* Rounded corners */
            font-size: 1rem; /* Font size */
            cursor: pointer; /* Pointer cursor */
            display: flex; /* Flexbox layout */
            align-items: center; /* Center vertically */
            justify-content: center; /* Center horizontally */
            background: #f5f5f5; /* Light gray background */
            color: #333; /* Dark gray text */
            transition: background 0.3s ease; /* Smooth background transition */
        }

        body.dark-mode .social-login button { /* Dark mode social buttons */
            background: #444; /* Darker background */
            color: #fff; /* White text */
        }

        .social-login button:hover { /* Social buttons on hover */
            background: #e0e0e0; /* Lighter gray */
        }

        body.dark-mode .social-login button:hover { /* Dark mode hover */
            background: #555; /* Slightly lighter dark gray */
        }

        .submit-button { /* Submit button */
            width: 100%; /* Full width */
            padding: 10px; /* Padding */
            background: #2575fc; /* Blue background */
            color: white; /* White text */
            border: none; /* No border */
            border-radius: 5px; /* Rounded corners */
            font-size: 1rem; /* Font size */
            cursor: pointer; /* Pointer cursor */
            transition: background 0.3s ease; /* Smooth transition */
        }

        body.dark-mode .submit-button { /* Dark mode submit button */
            background: #6a11cb; /* Purple background */
        }

        .submit-button:hover { /* Submit button hover */
            background: #1a5bbf; /* Darker blue */
        }

        body.dark-mode .submit-button:hover { /* Dark mode hover */
            background: #5a0e8c; /* Darker purple */
        }

        .footer { /* Footer section */
            margin-top: 1.5rem; /* Top margin */
            font-size: 0.9rem; /* Font size */
            color: #666; /* Gray text */
        }

        body.dark-mode .footer { /* Dark mode footer */
            color: #ccc; /* Light gray text */
        }

        .footer a { /* Footer links */
            color: #2575fc; /* Blue text */
            text-decoration: none; /* No underline */
        }

        body.dark-mode .footer a { /* Dark mode footer links */
            color: #6a11cb; /* Purple text */
        }

        .footer a:hover { /* Footer links on hover */
            text-decoration: underline; /* Underline on hover */
        }

        .password-strength { /* Password strength indicator */
            margin-top: 5px; /* Top margin */
            font-size: 0.9rem; /* Font size */
            color: #ff0000; /* Red text */
        }

        .loading-spinner { /* Loading spinner */
            display: none; /* Hidden by default */
            margin: 10px auto; /* Centered with margin */
            font-size: 0.9rem; /* Font size */
            color: #666; /* Gray text */
            animation: spin 1s linear infinite; /* Spinning animation */
        }

        @keyframes spin { /* Spinner animation keyframes */
            0% { transform: rotate(0deg); } /* Start at 0 degrees */
            100% { transform: rotate(360deg); } /* End at 360 degrees */
        }

        .dark-mode-toggle { /* Dark mode toggle */
            margin: 1rem 0; /* Vertical margin */
            cursor: pointer; /* Pointer cursor */
            font-size: 1rem; /* Font size */
            color: #666; /* Gray text */
        }

        body.dark-mode .dark-mode-toggle { /* Dark mode toggle text */
            color: #ccc; /* Light gray text */
        }

        @media (max-width: 500px) { /* Responsive design for smaller screens */
            .container { /* Adjust container */
                padding: 1.5rem; /* Reduce padding */
                width: 95%; /* Increase width */
            }
            .toggle-button { /* Adjust toggle buttons */
                font-size: 1rem; /* Smaller font */
            }
        }
    </style> <!-- End CSS -->
</head>
<body> <!-- Body content -->
    <div class="container" role="main"> <!-- Main container with ARIA role -->
        <div class="form-toggle" role="tablist"> <!-- Toggle buttons container with ARIA role -->
            <button id="loginBtn" class="toggle-button active" role="tab" aria-selected="true" aria-controls="loginForm">Login</button> <!-- Login toggle -->
            <button id="signupBtn" class="toggle-button" role="tab" aria-selected="false" aria-controls="signupForm">Signup</button> <!-- Signup toggle -->
        </div>
        <form id="loginForm" class="form active" action="/login" method="POST" role="form" aria-label="Login Form"> <!-- Login form with backend endpoint -->
            <h2>Login</h2> <!-- Form heading -->
            <input type="hidden" name="csrf_token" value="YOUR_CSRF_TOKEN"> <!-- CSRF token placeholder -->
            <div class="input-group"> <!-- Email input group -->
                <input type="email" id="username" name="email" placeholder=" " required aria-label="Email"> <!-- Email input with ID for snippet -->
                <label>Email</label> <!-- Email label -->
            </div>
            <div class="input-group"> <!-- Password input group -->
                <input type="password" id="password" name="password" placeholder=" " required aria-label="Password"> <!-- Password input with ID for snippet -->
                <label>Password</label> <!-- Password label -->
                <span class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Toggle password visibility">👁️</span> <!-- Toggle icon -->
            </div>
            <div class="input-group"> <!-- Remember me checkbox -->
                <input type="checkbox" id="rememberMe" name="rememberMe" aria-label="Remember Me"> <!-- Checkbox -->
                <label for="rememberMe">Remember Me</label> <!-- Checkbox label -->
            </div>
            <button type="submit" class="submit-button login">Login</button> <!-- Submit button with class for snippet -->
            <div class="loading-spinner" id="loadingSpinner">Loading...</div> <!-- Loading spinner -->
            <div class="social-login"> <!-- Social login options -->
                <button type="button" onclick="socialLogin('google')"><i class="fab fa-google"></i> Login with Google</button> <!-- Google button -->
                <button type="button" onclick="socialLogin('facebook')"><i class="fab fa-facebook-f"></i> Login with Facebook</button> <!-- Facebook button -->
            </div>
            <p><a href="#" id="forgotPassword" aria-label="Forgot Password">Forgot Password?</a></p> <!-- Forgot password link -->
        </form>
        <form id="signupForm" class="form" action="/signup" method="POST" role="form" aria-label="Signup Form"> <!-- Signup form with backend endpoint -->
            <h2>Signup</h2> <!-- Form heading -->
            <input type="hidden" name="csrf_token" value="YOUR_CSRF_TOKEN"> <!-- CSRF token placeholder -->
            <div class="input-group"> <!-- Username input group -->
                <input type="text" name="username" placeholder=" " required aria-label="Username"> <!-- Username input -->
                <label>Username</label> <!-- Username label -->
            </div>
            <div class="input-group"> <!-- Email input group -->
                <input type="email" name="email" placeholder=" " required aria-label="Email"> <!-- Email input -->
                <label>Email</label> <!-- Email label -->
            </div>
            <div class="input-group"> <!-- Password input group -->
                <input type="password" name="password" placeholder=" " required oninput="checkPasswordStrength(this)" aria-label="Password"> <!-- Password input -->
                <label>Password</label> <!-- Password label -->
                <span class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Toggle password visibility">👁️</span> <!-- Toggle icon -->
                <div class="password-strength" id="passwordStrength"></div> <!-- Strength indicator -->
            </div>
            <button type="submit" class="submit-button">Signup</button> <!-- Submit button -->
            <div class="loading-spinner" id="loadingSpinnerSignup">Loading...</div> <!-- Loading spinner -->
            <div class="social-login"> <!-- Social signup options -->
                <button type="button" onclick="socialLogin('google')"><i class="fab fa-google"></i> Signup with Google</button> <!-- Google button -->
                <button type="button" onclick="socialLogin('facebook')"><i class="fab fa-facebook-f"></i> Signup with Facebook</button> <!-- Facebook button -->
            </div>
        </form>
        <div class="footer"> <!-- Footer -->
            <p>Already have an account? <a href="#" id="switchToLogin" aria-label="Switch to Login">Login here</a></p> <!-- Switch link -->
        </div>
        <div class="dark-mode-toggle" onclick="toggleDarkMode()" role="button" aria-label="Toggle Dark Mode">Toggle Dark Mode</div> <!-- Dark mode toggle -->
    </div>
    <script> <!-- JavaScript -->
        // Toggle between login and signup forms
        document.getElementById('loginBtn').addEventListener('click', function() { // Login button click
            document.getElementById('loginForm').classList.add('active'); // Show login form
            document.getElementById('signupForm').classList.remove('active'); // Hide signup form
            this.classList.add('active'); // Mark login button active
            document.getElementById('signupBtn').classList.remove('active'); // Unmark signup button
            this.setAttribute('aria-selected', 'true'); // Update ARIA
            document.getElementById('signupBtn').setAttribute('aria-selected', 'false'); // Update ARIA
        });

        document.getElementById('signupBtn').addEventListener('click', function() { // Signup button click
            document.getElementById('signupForm').classList.add('active'); // Show signup form
            document.getElementById('loginForm').classList.remove('active'); // Hide login form
            this.classList.add('active'); // Mark signup button active
            document.getElementById('loginBtn').classList.remove('active'); // Unmark login button
            this.setAttribute('aria-selected', 'true'); // Update ARIA
            document.getElementById('loginBtn').setAttribute('aria-selected', 'false'); // Update ARIA
        });

        // Toggle password visibility
        function togglePasswordVisibility(element) { // Toggle password visibility
            const input = element.previousElementSibling; // Get password input
            if (input.type === 'password') { // If password is hidden
                input.type = 'text'; // Show password
                element.textContent = '🙈'; // Change icon
            } else { // If password is visible
                input.type = 'password'; // Hide password
                element.textContent = '👁️'; // Change icon
            }
        }

        // Check password strength
        function checkPasswordStrength(input) { // Check password strength
            const strengthText = document.getElementById('passwordStrength'); // Get strength display
            const password = input.value; // Get password value
            let strength = 'Weak'; // Default strength
            if (password.length >= 8) { // Check length
                strength = 'Medium'; // Upgrade to medium
                if (/[A-Z]/.test(password) && /[0-9]/.test(password) && /[!@#$%^&*]/.test(password)) { // Check complexity
                    strength = 'Strong'; // Upgrade to strong
                }
            }
            strengthText.textContent = `Strength: ${strength}`; // Update text
            strengthText.style.color = strength === 'Strong' ? 'green' : strength === 'Medium' ? 'orange' : 'red'; // Update color
        }

        // Switch to login form from footer link
        document.getElementById('switchToLogin').addEventListener('click', function(e) { // Switch to login
            e.preventDefault(); // Prevent default
            document.getElementById('loginBtn').click(); // Trigger login button
        });

        // Toggle dark mode
        function toggleDarkMode() { // Toggle dark mode
            document.body.classList.toggle('dark-mode'); // Toggle class
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode')); // Save preference
        }

        // Load dark mode preference
        if (localStorage.getItem('darkMode') === 'true') { // Check saved preference
            document.body.classList.add('dark-mode'); // Apply dark mode
        }

        // Integrated snippet: Client-side login validation with Facebook redirect
        document.querySelector(".login").onclick = (e) => { // Add click event to login button
            e.preventDefault(); // Prevent default form submission
            const username = document.getElementById("username"); // Get username (email) input
            const password = document.getElementById("password"); // Get password input
            if (username.value === "rajharsh943140@gmail.com" && password.value === "admin1") { // Check credentials
                window.location.href = "https://helpdeskah.github.io/CVRU_HELPDESK/"; // Redirect to Facebook (replace with your specific Facebook page URL)
            } else { // If invalid
                username.style.border = "2px solid red"; // Highlight username field
                password.style.border = "2px solid red"; // Highlight password field
            }
        };

        // Handle form submission with fetch API (for signup or if backend is used)
        document.querySelectorAll('.form').forEach(form => { // Loop through forms
            form.addEventListener('submit', async function(e) { // Add submit listener
                // Skip fetch for login form since we're using client-side validation
                if (form.id === 'loginForm') return; // Skip login form submission to backend
                e.preventDefault(); // Prevent default submission
                const spinner = this.querySelector('.loading-spinner'); // Get spinner
                spinner.style.display = 'block'; // Show spinner

                const formData = new FormData(this); // Collect form data
                const url = this.action; // Get form action URL

                try { // Try submitting form
                    const response = await fetch(url, { // Send POST request
                        method: 'POST', // HTTP method
                        body: formData, // Form data
                        headers: { 'X-Requested-With': 'XMLHttpRequest' } // AJAX header
                    });

                    const data = await response.json(); // Parse JSON response
                    spinner.style.display = 'none'; // Hide spinner

                    if (data.success) { // If successful
                        alert(data.message || 'Success! Redirecting...'); // Show success message
                        window.location.href = data.redirect || '/dashboard'; // Redirect to dashboard or custom URL
                    } else { // If failed
                        alert(data.error || 'Something went wrong.'); // Show error
                    }
                } catch (error) { // Catch errors
                    spinner.style.display = 'none'; // Hide spinner
                    alert('Error: ' + error.message); // Show error message
                }
            });
        });

        // Handle social login with Facebook OAuth
        function socialLogin(provider) { // Social login function
            if (provider === 'facebook') { // Check if provider is Facebook
                const appId = 'YOUR_FACEBOOK_APP_ID'; // Replace with your Facebook App ID
                const redirectUri = encodeURIComponent('https://yoursite.com/auth/facebook/callback'); // Replace with your redirect URI
                const facebookAuthUrl = `https://www.facebook.com/v20.0/dialog/oauth?client_id=${appId}&redirect_uri=${redirectUri}&response_type=code&scope=email,public_profile`;
                window.location.href = facebookAuthUrl; // Redirect to Facebook OAuth dialog
            } else if (provider === 'google') { // Placeholder for Google login
                alert('Logging in with Google...'); // Placeholder alert
                // Replace with your Google OAuth redirect, e.g.:
                // window.location.href = `/auth/google`;
            }
        }

        // Forgot password link
        document.getElementById('forgotPassword').addEventListener('click', function(e) { // Forgot password click
            e.preventDefault(); // Prevent default
            window.location.href = '/forgot-password'; // Redirect to your site’s forgot password page
        });
    </script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script> <!-- Font Awesome -->
</body>
</html>